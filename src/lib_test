#!/bin/sh
# These are common shell routines used by test scripts, sourced with ".".

bash_exe=$(which bash)

do_time()
	{
	local usr_cmd="$1"
	local cmd="\
TIMEFORMAT=\"time %2Rs\"
time $usr_cmd"
	$bash_exe -c "$cmd" 2>&1
	}

doing()
	{
	local name="$1"
	echo -n "do $name: "
	}

do_diff()
	{
	local prog="$1"
	local out="$2"
	doing $prog
	do_time "$prog | diff - $out"
	}
