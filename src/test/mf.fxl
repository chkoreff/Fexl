# https://en.wikipedia.org/wiki/Hofstadter_sequence#Hofstadter_Female_and_Male_sequences

evaluate
(
use "test.fxl";
use_lib "time.fxl";
standard
) \;

#do_benchmark;
#trace_elapsed;

\create=
	(
	\cache_0=cache_loop
	\cache_1=cache_loop

	\base\other
	\cache_loop=(eq base 0 cache_0 cache_1)

	cache_loop \this\n
	le n 0 base;
	- n; other; this; - n 1
	)

\male   = (@\this create 0 (create 1 this))
\female = (@\this create 1 (create 0 this))

\max=35

\show_sequence=
	(\label\f
	say label
	each (range 0 max) (\n put [(f n) " "])
	nl
	)

show_sequence "female" female
show_sequence "male" male
show_sequence "diff" (\n - (female n) (male n))
