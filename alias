#!/bin/sh
# The bang line above is for syntax highlighting only.

# Handy shell functions for development and testing.  You can source these in a
# new shell with ". alias".

sources="README.md build share test src"

.build()
	{
	./build quiet
	}

.fexl()
	{
	.build && bin/fexl $1
	}

# Search source.
.s()
	{
	if [ "$1" != "" ]; then
		grep -ra "$1" $sources --exclude "*.swp"
	fi
	}

# Search source for whole word.
.sw()
	{
	.s "\<$1\>"
	}

# Search source for stray trailing white space
.ss()
	{
	.s "\s$"
	}

.todo()
	{
	.s TODO
	}

.later()
	{
	.s LATER
	}

# Run a test script.
.run()
	{
	.build && bin/fexl "test/$1.fxl"
	}

# Check that the output of a test script equals its reference output.
.check()
	{
	.run $1 | diff -a - "test/$1.out"
	}

# Time a test script, also checking its output.
.time()
	{
	.build && time (bin/fexl test/$1.fxl | diff -a - "test/$1.out")
	}

# git status
.gs()
	{
	git status
	}

# git diff (-a treats binary files as text)
.gd()
	{
	git diff -a $1
	}
